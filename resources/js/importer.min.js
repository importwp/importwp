var currentNode=[],nodeOffset="",jci_element=null;jQuery(document).ready(function(i){var n,a={};i("#jc-importer_parser_settings-import_base").on("change",function(){i.fn.nodeSelect(null)}),i.fn.nodeSelect=function(e){a={action:"jc_import_file",id:ajax_object.id,base:i("#jc-importer_parser_settings-import_base").val()},void 0!==e&&(a.base=e),a.base&&(n=a.base.split("/"),nodeOffset=n[n.length-1]),i("<b>–</b>").prependTo("#treeView li:has(li)").click(function(){"–"==i(this).text()?i(this).text("+").parent("li").find(" > ul").children().hide():i(this).text("–").parent("li").find(" > ul").children().show()});var t="";i(".xml-draggable").click(function(){t=i(this).data("xpath"),jci_element.val("{"+t+"}"),jci_element.trigger("change"),tb_remove()})}}),jQuery(function(t){t("#jc-importer_parser_settings-import_base").click(function(){var e={action:"jc_base_node",id:ajax_object.id,iwp_ajax_nonce:ajax_object.iwp_ajax_nonce};t.post(ajax_object.ajax_url,e,function(e){t("#xml_preview_box").html(e)})})}),jQuery(document).ready(function(n){n(document).on("click",".xml-import .jci-import-edit",function(e){var t=n(this).closest(".jci-node-group"),i=n("#jc-importer_parser_settings-import_base").val();n(this).parent().hasClass("jci-group")&&(i+=t.find(".jc-importer_general-group input").val()),jci_element=n(this).parent().find("input");tb_show("Node Select",ajax_object.node_ajax_url+"&type=xml&current="+jci_element.val()+"&base="+i+"&iwp_ajax_nonce="+ajax_object.iwp_ajax_nonce);e.preventDefault()}),n(document).on("click",".base-node-select",function(e){if(n(this).hasClass("base")){jci_element=n(this).parent().find("input");tb_show("Node Select",ajax_object.base_node_ajax_url+"&current="+jci_element.val()+"&iwp_ajax_nonce="+ajax_object.iwp_ajax_nonce)}else{var t=n("#jc-importer_parser_settings-import_base").val();jci_element=n(this).parent().find("input");tb_show("Node Select",ajax_object.base_node_ajax_url+"&current="+jci_element.val()+"&base="+t+"&iwp_ajax_nonce="+ajax_object.iwp_ajax_nonce)}e.preventDefault()})}),jQuery(function(t){t(document).on("click",".csv-import .jci-import-edit",function(e){jci_element=t(this).parent().find("input");tb_show("Node Select",ajax_object.node_ajax_url+"&type=csv&width=800&iwp_ajax_nonce="+ajax_object.iwp_ajax_nonce);e.preventDefault()})}),function(l){l.fn.jci_enableField=function(e,t){var i=l('input[name$="['+e+']"]'),n=l("#jc-importer_field-"+t);n.length||(n=l(t)),i.on("change",function(){var e=n.parent();l(this).is(":checked")?e.show():e.hide()}),i.trigger("change")},l.fn.jci_enableSelectField=function(e,t){var i=l('input[name$="['+e+']"]'),n=l("input#jc-importer_field-"+t),a=l("select#jc-importer_field-"+t)[0].outerHTML,c=n[0].outerHTML,o=n.val(),r=0;i.on("change",function(){l(this).is(":checked")?(1==r&&(o=l("select#jc-importer_field-"+t).val()),l("select#jc-importer_field-"+t).replaceWith(c),0<o.length&&l("input#jc-importer_field-"+t).val(o),l("input#jc-importer_field-"+t).parent().removeClass("select")):(1==r&&(o=l("input#jc-importer_field-"+t).val()),l("input#jc-importer_field-"+t).replaceWith(a),0<o.length&&l("select#jc-importer_field-"+t).val(o),l("select#jc-importer_field-"+t).parent().addClass("select"))}),i.trigger("change"),r=1}}(jQuery),function(e){var t=function(){e(".iwp-field__tooltip:not(.iwp-field__tooltip--initialized)").each(function(){e(this).attr("title")?(e(this).addClass("iwp-field__tooltip--initialized"),e(this).tipTip({defaultPosition:"right"})):e(this).hide()})};e(document).ready(function(){t()}),e(document).on("iwp_importer_updated",function(){t()})}(jQuery);